{"version":3,"sources":["pages/index.module.scss","images/coffee-main.jpeg","pages/Login.jsx","components/chat/Message.jsx","components/chat/Chat.jsx","components/settings/Device.jsx","components/settings/MediaDevices.jsx","components/webrtc/IceCandidates.jsx","pages/Settings.jsx","components/user/User.jsx","components/user/UserList.jsx","pages/Home.jsx","pages/App.jsx","reportWebVitals.js","index.js","components/chat/index.module.scss","components/settings/index.module.scss","components/user/index.module.scss"],"names":["module","exports","Login","onLogin","useState","nickname","setNickname","setDisabled","isValidName","name","length","handleOnLogin","className","styles","login","src","image","login__overlay","login__wrapper","login__title","login__login","placeholder","onChange","e","target","value","type","maxLength","onClick","Message","message","sender","id","classnames","message__sender","Chat","socket","setMessage","messages","setMessages","inputRef","useRef","messagesRef","sendMessage","emit","prev","current","useEffect","scrollIntoView","handleOnKeyDown","useCallback","key","handleOnChange","onMessage","on","off","chat","map","ref","messageInput","TextField","onKeyDown","variant","size","Button","color","Device","devices","kind","device","FormControl","device__form","InputLabel","Select","labelId","MenuItem","deviceId","label","MediaDevices","audioInput","setAudioInput","audioOutput","setAudioOutput","videoInput","setVideoInput","a","navigator","mediaDevices","enumerateDevices","filter","settings","IceCandidates","icecandidates","candidate","address","port","protocol","stun","Settings","videoRef","iceCandidates","setIceCandidates","handleOpenStream","getUserMedia","audio","video","stream","srcObject","handleIceCandidates","connection","RTCPeerConnection","iceServers","urls","onicecandidate","ice","createOffer","offerToReceiveAudio","offer","setLocalDescription","settings__left","settings__right","autoPlay","playsInline","User","onCall","user","UserList","users","userlist","Home","localVideoRef","remoteVideoRef","setOffer","callerId","setCallerId","setUsers","setStream","queue","splice","findIndex","s","console","log","setRemoteDescription","RTCSessionDescription","then","forEach","answer","RTCIceCandidate","addIceCandidate","ontrack","streams","handleOnCall","getTracks","track","addTrack","offerToReceiveVideo","handleAnswer","createAnswer","home","App","setSocket","localStorage","getItem","socketIOClient","process","withCredentials","extraHeaders","app","setItem","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5b11e760.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"mobile\":\"320px\",\"tabletPortrait\":\"600px\",\"tabletLandscape\":\"800px\",\"desktop\":\"1200px\",\"viewportLimit\":\"1800px\",\"home\":\"pages_home__TzgP_\",\"settings\":\"pages_settings__3YtZi\",\"settings__right\":\"pages_settings__right__2HMwJ\",\"login\":\"pages_login__1zU2N\",\"login__overlay\":\"pages_login__overlay__3ruVW\",\"login__wrapper\":\"pages_login__wrapper__3jyhL\",\"login__title\":\"pages_login__title__1y1SG\",\"login__login\":\"pages_login__login__3-sUG\"};","export default __webpack_public_path__ + \"static/media/coffee-main.b851936d.jpeg\";","import styles from './index.module.scss';\nimport { Button, TextField } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport image from '../images/coffee-main.jpeg';\n\nconst Login = ({ onLogin }) => {\n\n  const [nickname, setNickname] = useState('');\n  const [disabled, setDisabled] = useState(true);\n\n  const isValidName = (name) => {\n    return name && name.length >= 1;\n  }\n\n  const handleOnChange = (e) => {\n    const name = e.target.value;\n    setDisabled(!isValidName(name));\n    setNickname(name);\n  };\n\n  const handleKeyDown = ({ key }) => {\n    if (key === 'Enter') handleOnLogin();\n  }\n\n  const handleOnLogin = () => {\n    if (isValidName(nickname) && onLogin) {\n      onLogin(nickname);\n    }\n  };\n\n  return (\n    <div className={styles.login}>\n      <img src={image} />\n      <div className={styles.login__overlay} />\n      <div className={styles.login__wrapper}>\n        <div className={styles.login__title}>\n          <h1>Hello</h1>\n          <p>{nickname && `${nickname}, `}ready for some coffee?</p>\n        </div>\n        <div className={styles.login__login}>\n          <input placeholder=\"Nickname\" onChange={handleOnChange} type=\"text\" maxLength={16} />\n          <button onClick={handleOnLogin}>Ready</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;","import styles from './index.module.scss';\nimport React from 'react';\nimport classnames from 'classnames';\n\nconst Message = ({ message, sender, id, nickname }) => {\n  return (\n    <div className={classnames(styles.message, { [styles.message__sender]: sender })}>\n      <span>{nickname}</span>\n      <div>{message}</div>\n    </div>\n  );\n}\n\nexport default Message;","import styles from './index.module.scss';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Button, TextField } from '@material-ui/core';\nimport Message from './Message';\n\nconst Chat = ({ socket }) => {\n\n  const [message, setMessage] = useState();\n  const [messages, setMessages] = useState([]);\n\n  const inputRef = useRef();\n  const messagesRef = useRef();\n\n  const sendMessage = () => {\n    if (message) {\n      socket?.emit('message', message);\n      setMessages((prev) => [...prev, { message, nickname: 'You', sender: true }]);\n      inputRef.current.value = '';\n      setMessage('');\n    }\n  };\n\n  useEffect(() => {\n    messagesRef.current?.scrollIntoView();\n  }, [messages]);\n\n  const handleOnKeyDown = useCallback(({ key }) => {\n    if (key === 'Enter') { sendMessage(); };\n  }, [sendMessage]);\n\n  const handleOnChange = useCallback(({ target }) => {\n    setMessage(target.value);\n  }, []);\n\n  useEffect(() => {\n    const onMessage = (message) => setMessages((prev) => [...prev, message]); \n    socket?.on('message', onMessage);\n\n    return () => {\n      socket?.off('message', onMessage);\n    }\n  }, [socket]);\n\n  return (\n    <div className={styles.chat}>\n      <div className={styles.messages}>\n        { messages.map((message) => <Message {...message} />) }\n        <div ref={messagesRef} />\n      </div>\n      <div className={styles.messageInput}>\n        <TextField inputRef={inputRef} onChange={handleOnChange} onKeyDown={handleOnKeyDown} variant=\"outlined\" size=\"small\" />\n        <Button onClick={sendMessage} variant=\"contained\" color=\"primary\">Send</Button>\n      </div>\n    </div>\n  );\n}\n\nexport default Chat;","import styles from './index.module.scss';\nimport { Button, MenuItem, Select, InputLabel, FormControl } from '@material-ui/core';\nimport React from 'react';\n\nconst Device = ({ devices, kind }) => {\n  return (\n    <div className={styles.device}>\n      <FormControl className={styles.device__form} variant=\"outlined\">\n        <InputLabel id={kind} variant=\"outlined\">{kind}</InputLabel>\n        <Select labelId={kind} variant=\"outlined\">\n          {devices.map(device => <MenuItem value={device.deviceId}>{device.label}</MenuItem>)}\n        </Select>\n      </FormControl>\n    </div>\n  );\n}\n\nexport default Device;","import styles from './index.module.scss';\nimport { Button, TextField } from '@material-ui/core';\nimport React, { useEffect, useState } from 'react';\nimport Device from './Device';\n\nconst MediaDevices = ({  }) => {\n\n  const [audioInput, setAudioInput] = useState([]);\n  const [audioOutput, setAudioOutput] = useState([]);\n  const [videoInput, setVideoInput] = useState([]);\n\n  useEffect(async() => {\n    try {\n      const devices = await navigator.mediaDevices.enumerateDevices() || [];\n      setAudioInput(devices.filter(device => device.kind === 'audioinput'));\n      setAudioOutput(devices.filter(device => device.kind === 'audiooutput'));\n      setVideoInput(devices.filter(device => device.kind === 'videoinput'));\n    } catch (error) {\n\n    }\n  }, []);\n\n  return (\n    <div className={styles.settings}>\n      <Device devices={audioInput} kind=\"audioinput\" />\n      <Device devices={audioOutput} kind=\"audiooutput\" />\n      <Device devices={videoInput} kind=\"videoinput\" />\n    </div>\n  );\n}\n\nexport default MediaDevices;","import styles from './index.module.scss';\n\nconst IceCandidates = ({ icecandidates = [] }) => {\n  return (\n    <table>\n      <tr>\n        <th>Address</th>\n        <th>Port</th>\n        <th>Protocol</th>\n      </tr>\n      {icecandidates.map((candidate) => candidate && (\n        <tr key={`${candidate?.address}:${candidate?.port}`}>\n          <td>{candidate?.address}</td>\n          <td>{candidate?.port}</td>\n          <td>{candidate?.protocol}</td>\n        </tr>\n      ))}\n    </table>\n  );\n}\n\nexport default IceCandidates;\n\n/*\naddress: \"192.168.0.126\"\ncandidate: \"candidate:547636346 1 udp 2122260223 192.168.0.126 51427 typ host generation 0 ufrag 7vas network-id 1 network-cost 10\"\ncomponent: \"rtp\"\nfoundation: \"547636346\"\nport: 51427\npriority: 2122260223\nprotocol: \"udp\"\nrelatedAddress: null\nrelatedPort: null\nsdpMLineIndex: 0\nsdpMid: \"0\"\ntcpType: null\ntype: \"host\"\nusernameFragment: \"7vas\"\n*/","import { Button } from '@material-ui/core';\nimport { useRef, useState } from 'react';\nimport MediaDevices from '../components/settings/MediaDevices';\nimport IceCandidates from '../components/webrtc/IceCandidates';\nimport styles from './index.module.scss';\n\nconst stun = [\n  'stun:stun.l.google.com:19302',\n  'stun:stun1.l.google.com:19302',\n  'stun:stun2.l.google.com:19302',\n  'stun:stun3.l.google.com:19302',\n  'stun:stun4.l.google.com:19302',\n  'stun:stun.freeswitch.org:3478'\n]\n\nconst Settings = () => {\n\n  const videoRef = useRef();\n  const [iceCandidates, setIceCandidates] = useState([]);\n\n  const handleOpenStream = async () => {\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true, video: true });\n    videoRef.current.srcObject = stream;\n  };\n\n  const handleIceCandidates = async () => {\n    const connection = new RTCPeerConnection({\n      iceServers: [{ urls: stun }]\n    });\n    setIceCandidates([]);\n    connection.onicecandidate = (ice) => {\n      setIceCandidates(prev => [...prev, ice.candidate]);\n    }\n    const offer = await connection.createOffer({ offerToReceiveAudio: true, offerToReceiveAudio: true });\n    connection.setLocalDescription(offer);\n  }\n\n  return (\n    <div className={styles.settings}>\n      <div className={styles.settings__left}>\n        <MediaDevices />\n      </div>\n      <div className={styles.settings__right}>\n        <div>\n          <video ref={videoRef} autoPlay playsInline />\n          <Button variant=\"contained\" color=\"primary\" onClick={handleOpenStream}>Start</Button>\n          <Button variant=\"contained\" color=\"primary\" onClick={handleIceCandidates}>Gather ICE candidates</Button>\n        </div>\n        <IceCandidates icecandidates={iceCandidates} />\n      </div>\n    </div>\n  );\n}\n\nexport default Settings;\n","import { Button } from '@material-ui/core';\nimport styles from './index.module.scss';\n\nconst User = ({ id, nickname, onCall }) => {\n  return (\n    <Button className={styles.user} variant=\"contained\" color=\"primary\" onClick={() => onCall(id)}>\n      Video call with {nickname}\n    </Button>\n  );\n}\n\nexport default User;\n","import User from \"./User\";\nimport styles from './index.module.scss';\n\nconst UserList = ({ users, onCall }) => {\n  return (\n    <div className={styles.userlist}>\n      {users.map((user) => <User key={user.id} {...user} onCall={onCall} />)}\n    </div>\n  );\n}\n\nexport default UserList;","import { useEffect, useRef, useState } from \"react\";\nimport Chat from \"../components/chat/Chat\";\nimport Settings from \"../pages/Settings\";\nimport UserList from \"../components/user/UserList\";\nimport styles from './index.module.scss';\n\nconst stun = [\n  'stun:stun.l.google.com:19302',\n  'stun:stun1.l.google.com:19302',\n  'stun:stun2.l.google.com:19302',\n  'stun:stun3.l.google.com:19302',\n  'stun:stun4.l.google.com:19302',\n  'stun:stun.freeswitch.org:3478'\n]\n\nconst connection = new RTCPeerConnection({\n  iceServers: [ {urls: stun } ]\n});\n\nconst Home = ({ nickname, socket }) => {\n\n  const localVideoRef = useRef();\n  const remoteVideoRef = useRef();\n\n  const [offer, setOffer] = useState();\n  const [callerId, setCallerId] = useState();\n  const [users, setUsers] = useState([]);\n\n  const [stream, setStream] = useState();\n\n  useEffect(() => {\n\n    const queue = [];\n\n    socket?.on('user-enter', (user) => setUsers((prev) => [...prev, user]));\n    socket?.on('user-left', (user) => setUsers((prev) => prev.splice(prev.findIndex(s => s.id === user.id), 1)));\n\n\n    socket?.on('welcome', (users) => setUsers(users));\n    socket?.on('offer', ({ offer, callerId }) => {\n      console.log('Recieve offer', offer, callerId); \n      setOffer(offer); \n      setCallerId(callerId); \n      connection.setRemoteDescription(new RTCSessionDescription(offer))\n        .then(() => {\n          console.log('Remote description is set');\n          queue.forEach(candidate => {\n\n          });\n        });\n    });\n    socket?.on('answer', (answer) => {\n      console.log('Recieve answer', new RTCSessionDescription(answer)); \n      connection.setRemoteDescription(new RTCSessionDescription(answer));\n    });\n    socket?.on('icecandidate', async (candidate) => {\n      console.log('Adding ICE candidate...', new RTCIceCandidate(candidate));\n      connection.addIceCandidate(new RTCIceCandidate(candidate));\n    });\n\n\n\n\n    connection.ontrack = (e) => {\n      console.log(\"Answer got some connection \");\n       if (remoteVideoRef.current.srcObject !== e.streams[0]) {\n        remoteVideoRef.current.srcObject = e.streams[0];\n       }\n    }\n\n\n\n\n  }, [socket]);\n\n  const handleOnCall = (async (id) => {\n\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: false, video: true });\n    setStream(stream);\n    localVideoRef.current.srcObject = stream;\n\n    connection.onicecandidate = (e) => {\n      if (e.candidate) { socket?.emit('icecandidate', { id, candidate: new RTCIceCandidate(e.candidate) }); }\n    }\n\n    stream.getTracks().forEach(track => connection.addTrack(track, stream));\n\n    const offer = await connection.createOffer({ offerToReceiveAudio: true, offerToReceiveVideo: true });\n\n\n\n    socket?.emit('offer', { id, offer}, () => {\n      console.log('Offer callback');\n    });\n    \n\n    connection.setLocalDescription(offer);\n\n\n      \n  });\n\n  const handleAnswer = (async() => {\n\n\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: false, video: true });\n    localVideoRef.current.srcObject = stream;\n    stream.getTracks().forEach(track => connection.addTrack(track, stream));\n\n\n    connection.onicecandidate = (e) => {\n      if (e.candidate) { socket?.emit('icecandidate', { id: callerId, candidate: new RTCIceCandidate(e.candidate) }); }\n    }\n\n    const answer = await connection.createAnswer();\n\n    socket?.emit('answer', { id: callerId, answer });\n\n    await connection.setLocalDescription(answer);\n\n    \n  });\n\n  return (\n    <div className={styles.home}>\n      <div>\n        <UserList users={users} onCall={handleOnCall} />\n        { offer && <button onClick={handleAnswer}>Answer</button> }\n        { callerId && `Caller: ${callerId}` }\n        <video ref={localVideoRef} autoPlay playsInline />\n        <video ref={remoteVideoRef} autoPlay playsInline />\n      </div>\n      <Chat socket={socket} />\n      <Settings />\n    </div>\n  );\n}\n\nexport default Home;\n","import { useEffect, useState } from \"react\";\nimport Login from \"./Login\";\nimport Home from './Home';\nimport socketIOClient from 'socket.io-client';\nimport styles from './index.module.scss';\n\nconst host = process.env.REACT_APP_SIGNALING_SERVER;\n\nconst App = () => {\n\n  const [socket, setSocket] = useState();\n  const [nickname, setNickname] = useState(() => localStorage.getItem('nickname'));\n\n  const handleOnLogin = (nickname) => {\n    if (nickname) {\n      localStorage.setItem('nickname', nickname);\n      setNickname(nickname);\n    }\n  };\n\n  useEffect(() => {\n    setSocket(socketIOClient(host, {\n      withCredentials: true,\n      extraHeaders: { 'ecoffee-nickname': nickname }\n    }));\n  }, [nickname]);\n\n  return (\n    <div className={styles.app}>\n      { nickname ? <Home nickname={nickname} socket={socket} /> : <Login onLogin={handleOnLogin} /> }\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './pages/App';\nimport reportWebVitals from './reportWebVitals';\nimport './index.css';\nimport Login from './pages/Login';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat\":\"chat_chat__16YQr\",\"messageInput\":\"chat_messageInput__wyxMG\",\"messages\":\"chat_messages__3Bv-7\",\"message\":\"chat_message__35AWL\",\"message__sender\":\"chat_message__sender__31rk4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"device\":\"settings_device__2wFYs\",\"device__form\":\"settings_device__form__3whnm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"user\":\"user_user__CVTWO\",\"userlist\":\"user_userlist__2yMXx\"};"],"sourceRoot":""}