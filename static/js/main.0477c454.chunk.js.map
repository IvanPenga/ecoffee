{"version":3,"sources":["components/chat/index.module.scss","components/login/index.module.scss","components/overlay/index.module.scss","pages/index.module.scss","components/video/index.module.scss","images/coffee-main.jpeg","components/overlay/Overlay.jsx","avatars/index.js","components/login/AvatarModal.jsx","pages/Login.jsx","components/chat/Message.jsx","components/chat/Chat.jsx","components/video/LocalVideo.jsx","webrtc/stun.js","pages/Home.jsx","pages/App.jsx","reportWebVitals.js","index.js"],"names":["module","exports","Overlay","children","visible","onClick","handleOnOverlayClick","useCallback","event","target","currentTarget","className","classnames","styles","overlay","hashes","getAvatar","hash","AvatarModal","onClose","selectedHash","useState","selected","setSelected","handleOnClose","console","log","avatarModal","stroke","focusable","viewBox","aria-hidden","d","map","classNames","avatarModal__selected","handleOnSelect","tabIndex","src","Login","onLogin","nickname","setNickname","localStorage","getItem","avatar","setAvatar","setDisabled","modalOpen","setModalOpen","setSelectedHash","isValidName","name","length","handleOnLogin","login","image","login__overlay","login__wrapper","login__title","login__login","login__login__avatar","spellCheck","onKeyDown","key","placeholder","onChange","e","value","type","maxLength","Message","message","sender","id","message__sender","Chat","socket","setMessage","messages","setMessages","inputRef","useRef","messagesRef","sendMessage","emit","prev","current","focus","useEffect","scrollIntoView","handleOnKeyDown","handleOnChange","onMessage","on","off","chat","ref","messageInput","LocalVideo","RTCPeerConnection","iceServers","urls","play","onPlay","localVideoRef","playLocalStream","a","navigator","mediaDevices","getUserMedia","audio","video","stream","srcObject","error","localVideo","autoPlay","playsInline","Home","overlayVisible","setOverlayVisible","setStream","home","App","setSocket","socketIOClient","process","withCredentials","extraHeaders","app","setItem","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.0477c454.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat\":\"chat_chat__16YQr\",\"messageInput\":\"chat_messageInput__wyxMG\",\"messages\":\"chat_messages__3Bv-7\",\"message\":\"chat_message__35AWL\",\"message__sender\":\"chat_message__sender__31rk4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mobile\":\"320px\",\"tabletPortrait\":\"600px\",\"tabletLandscape\":\"800px\",\"desktop\":\"1200px\",\"viewportLimit\":\"1800px\",\"avatarModal\":\"login_avatarModal__1D_H3\",\"avatarModal__selected\":\"login_avatarModal__selected__1Qnt9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"overlay_overlay__2rQ9-\",\"visible\":\"overlay_visible__vRS_O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mobile\":\"320px\",\"tabletPortrait\":\"600px\",\"tabletLandscape\":\"800px\",\"desktop\":\"1200px\",\"viewportLimit\":\"1800px\",\"home\":\"pages_home__TzgP_\",\"settings\":\"pages_settings__3YtZi\",\"settings__right\":\"pages_settings__right__2HMwJ\",\"login\":\"pages_login__1zU2N\",\"login__overlay\":\"pages_login__overlay__3ruVW\",\"login__wrapper\":\"pages_login__wrapper__3jyhL\",\"login__title\":\"pages_login__title__1y1SG\",\"login__login\":\"pages_login__login__3-sUG\",\"login__login__avatar\":\"pages_login__login__avatar__2hQGQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"localVideo\":\"video_localVideo__Tmry_\"};","export default __webpack_public_path__ + \"static/media/coffee-main.b851936d.jpeg\";","import styles from './index.module.scss';\nimport React, { useCallback } from 'react';\nimport classnames from 'classnames';\n\nconst Overlay = ({ children, visible, onClick }) => {\n\n  const handleOnOverlayClick = useCallback((event) => {\n    event.target === event.currentTarget && onClick();\n  }, [onClick]);\n\n  return (\n    <div onClick={handleOnOverlayClick} className={classnames(styles.overlay, { [styles.visible]: visible })}>\n      {children}\n    </div>\n  );\n}\n\nexport default Overlay;","const url = 'https://robohash.org/';\nconst ext = '.png';\nconst query = '?size=100x100';\nconst hashes = [\n  'b9cc3872853c8c3ed85db39771a27fe3',\n  'f1e68df62e876e7fd0e51c20b0f4a7f4',\n  'ef67ea27213a5744db57dc0fd3a3ba22',\n  '07b4fe6d6119fb4501a489466eeee235',\n  'ec2acfd745b1efbe615f0a89ae2956ce',\n  'd2b82830880fd50a4d1e9d20fc3ecb74',\n  'f4df169dcfa242fcab91495eeff9dadb',\n  '802ddba716bb44302943f322c419ae58',\n  'b91774ec221c52d0bfb718a1ae3ab8c6',\n  'ac01b565737abe314877dcc981aa37f3',\n  '65528ccdb996fcb57c85cd584772310c',\n  '568f03fb703e6f4137ccb2fc7e5cbdd8',\n  '9c3f3ffb2939a30d7aa42105b0668820',\n  '5ac483a422267f2882fe8fe8b2173fbe',\n  '42df9bb3cfd73ef98f3302e594d26b39',\n  '849b922ba34228e8cb882866bc283b17',\n  '4a3ca6cb07b66e4bde0806c703e442ed',\n  'f591ddaef9ed87f9e7b3d113a40c4b46',\n  '10c1f317b31ca5a76e9c34af34dc7827',\n  'b01ed1e0657688cad8aeb3d2d1b3d94b',\n  'eba297a6d31d8650bd626a423ff274ad',\n  '6ebd5f6d4c9d43c1dc5083a5f2082167',\n  'c2d9f90a61e4d28f7734dafb65457017',\n  '64211c6c85f66d89c1e2177d578719de',\n  '73cbc5714ec21972aeadcbee69dfe956',\n  '8df99977ee64dfa6a9c581ce7a7e277a',\n  'd723e9b27ce8864111a5cbb59cc9c720',\n  '8e428180bfc90f6364e72a3769902455',\n  '4dc9c222c5e2599d2b72e8eddc150b94',\n  '3d586a434b17e3d1ed7d6eb050a97fb0',\n];\n\nconst getAvatar = (hash) => {\n  return `${url}${hash}${ext}${query}`;\n}\n\nexport default getAvatar;\nexport { getAvatar, hashes }","import styles from './index.module.scss';\nimport React, { useMemo, useState } from 'react';\nimport Overlay from '../overlay/Overlay';\nimport { hashes, getAvatar } from '../../avatars';\nimport classNames from 'classnames';\n\nconst AvatarModal = ({ onClose, visible, selectedHash }) => {\n\n  const [selected, setSelected] = useState(() => selectedHash || hashes[0]);\n\n  const handleOnClose = () => {\n    console.log('Closing', selected);\n    if (onClose) onClose(selected);\n  }\n\n  const handleOnSelect = (hash) => {\n    setSelected(hash);\n  }\n\n  return (\n    <Overlay onClick={handleOnClose} visible={visible}>\n      <div className={styles.avatarModal}>\n        <svg onClick={handleOnClose} stroke=\"white\" focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\">\n          <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path>\n        </svg>\n        {hashes.map((hash) => (\n          <img\n            className={classNames({ [styles.avatarModal__selected]: hash === selected })}\n            key={hash}\n            onClick={() => handleOnSelect(hash)}\n            tabIndex={0}\n            src={getAvatar(hash)}\n          />\n        ))}\n      <footer>\n        Pick your favourite robot\n      </footer>\n      </div>\n    </Overlay>\n  );\n}\n\nexport default AvatarModal;","import styles from './index.module.scss';\nimport { Button, TextField } from '@material-ui/core';\nimport React, { useState } from 'react';\nimport image from '../images/coffee-main.jpeg';\nimport AvatarModal from '../components/login/AvatarModal';\nimport {getAvatar, hashes} from '../avatars';\n\nconst Login = ({ onLogin }) => {\n\n  const [nickname, setNickname] = useState('');\n  const [avatar, setAvatar] = useState(() => getAvatar(localStorage.getItem('avatar') || hashes[0]));\n  const [disabled, setDisabled] = useState(true);\n  const [modalOpen, setModalOpen] = useState(false);\n  const [selectedHash, setSelectedHash] = useState();\n\n  const isValidName = (name) => {\n    return name && name.length >= 1;\n  }\n\n  const handleOnChange = (e) => {\n    const name = e.target.value;\n    setDisabled(!isValidName(name));\n    setNickname(name);\n  };\n\n  const handleKeyDown = ({ key }) => {\n    if (key === 'Enter') handleOnLogin();\n  }\n\n  const handleOnLogin = () => {\n    if (isValidName(nickname) && onLogin) {\n      onLogin(nickname);\n    }\n  };\n\n  const handleOnAvatarClick = () => {\n    setModalOpen(true);\n  }\n\n  const handleOnAvatarClose = (hash) => {\n    setModalOpen(false);\n    setSelectedHash(hash);\n    setAvatar(getAvatar(hash));\n  }\n\n  return (\n    <div className={styles.login}>\n      <AvatarModal visible={modalOpen} onClose={handleOnAvatarClose} selectedHash={selectedHash} />\n      <img src={image} />\n      <div className={styles.login__overlay} />\n      <div className={styles.login__wrapper}>\n        <div className={styles.login__title}>\n          <h1>Hello</h1>\n          <p>{nickname && `${nickname}, `}ready for some coffee?</p>\n        </div>\n        <div className={styles.login__login}>\n          <div>\n            <button onClick={handleOnAvatarClick} className={styles.login__login__avatar}>\n              <img src={avatar} />\n            </button>\n            <input spellCheck={false} onKeyDown={handleKeyDown} placeholder=\"Nickname\" onChange={handleOnChange} type=\"text\" maxLength={16} />\n          </div>\n          <button onClick={handleOnLogin}>Ready</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;","import styles from './index.module.scss';\nimport React from 'react';\nimport classnames from 'classnames';\n\nconst Message = ({ message, sender, id, nickname }) => {\n  return (\n    <div className={classnames(styles.message, { [styles.message__sender]: sender })}>\n      <span>{nickname}</span>\n      <div>{message}</div>\n    </div>\n  );\n}\n\nexport default Message;","import styles from './index.module.scss';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport Message from './Message';\n\nconst Chat = ({ socket }) => {\n\n  const [message, setMessage] = useState();\n  const [messages, setMessages] = useState([]);\n\n  const inputRef = useRef();\n  const messagesRef = useRef();\n\n  const sendMessage = () => {\n    if (message) {\n      socket?.emit('message', message);\n      setMessages((prev) => [...prev, { message, nickname: 'You', sender: true }]);\n      inputRef.current.value = '';\n      setMessage('');\n      inputRef.current?.focus();\n    }\n  };\n\n  useEffect(() => {\n    messagesRef.current?.scrollIntoView();\n  }, [messages]);\n\n  const handleOnKeyDown = useCallback(({ key }) => {\n    if (key === 'Enter') { sendMessage(); };\n  }, [sendMessage]);\n\n  const handleOnChange = useCallback(({ target }) => {\n    setMessage(target.value);\n  }, []);\n\n  useEffect(() => {\n    const onMessage = (message) => setMessages((prev) => [...prev, message]); \n    socket?.on('message', onMessage);\n\n    return () => {\n      socket?.off('message', onMessage);\n    }\n  }, [socket]);\n\n  return (\n    <div className={styles.chat}>\n      <div className={styles.messages}>\n        { messages.map((message) => <Message {...message} />) }\n        <div ref={messagesRef} />\n      </div>\n      <div className={styles.messageInput}>\n        <input ref={inputRef} onChange={handleOnChange} onKeyDown={handleOnKeyDown} />\n        <button onClick={sendMessage}>\n          <svg focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"></path></svg>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default Chat;","import styles from './index.module.scss';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport stunServers from '../../webrtc/stun';\n\nconst connection = new RTCPeerConnection({\n  iceServers: [ {urls: stunServers } ]\n});\n\nconst LocalVideo = ({ play, onPlay }) => {\n\n  const localVideoRef = useRef();\n\n  const playLocalStream = useCallback(async() => {\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: false, video: true });\n    localVideoRef.current.srcObject = stream;\n    if (onPlay) onPlay(stream);\n  }, []);\n\n  useEffect(async() => {\n    if (play) {\n      try {\n        playLocalStream();\n      } catch(error) {\n        console.log(error);\n      }\n    }\n  }, [play]);\n\n  return (\n    <video className={styles.localVideo} ref={localVideoRef} autoPlay playsInline />\n  );\n}\n\nexport default LocalVideo;","const stunServers = [\n  'stun:stun.l.google.com:19302',\n  'stun:stun1.l.google.com:19302',\n  'stun:stun2.l.google.com:19302',\n  'stun:stun3.l.google.com:19302',\n  'stun:stun4.l.google.com:19302',\n  'stun:stun.freeswitch.org:3478'\n];\n\nexport default stunServers;","import { useEffect, useRef, useState } from \"react\";\nimport Chat from \"../components/chat/Chat\";\nimport styles from './index.module.scss';\nimport Overlay from '../components/overlay/Overlay';\nimport LocalVideo from \"../components/video/LocalVideo\";\n\nconst Home = ({ nickname, socket }) => {\n\n  const [overlayVisible, setOverlayVisible] = useState(false);\n  const [stream, setStream] = useState(null);\n\n  const handleOnVideoClick = () => {\n    setOverlayVisible(true);\n  }\n\n  const handleOnLocalVideoPlay = (stream) => {\n    setStream(stream);\n  }\n\n  return (\n    <div className={styles.home}>\n      <header>\n        <div>\n          <span>Hello {nickname}</span>\n          <button onClick={handleOnVideoClick}>\n            <svg focusable=\"false\" viewBox=\"0 0 24 24\" aria-hidden=\"true\"><path d=\"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z\"></path></svg>\n          </button>\n        </div>\n      </header>\n      <Chat socket={socket} />\n      <Overlay visible={overlayVisible} onClick={() => setOverlayVisible(false)}>\n        <LocalVideo play={overlayVisible} onPlay={handleOnLocalVideoPlay} />\n        <span></span>\n      </Overlay>\n    </div>\n  );\n}\n\nexport default Home;\n","import { useEffect, useState } from \"react\";\nimport Login from \"./Login\";\nimport Home from './Home';\nimport socketIOClient from 'socket.io-client';\nimport styles from './index.module.scss';\n\nconst host = process.env.REACT_APP_SIGNALING_SERVER;\n\nconst App = () => {\n\n  const [socket, setSocket] = useState();\n  const [nickname, setNickname] = useState(() => localStorage.getItem('nickname'));\n\n  const handleOnLogin = (nickname) => {\n    if (nickname) {\n      localStorage.setItem('nickname', nickname);\n      setNickname(nickname);\n    }\n  };\n\n  useEffect(() => {\n    setSocket(socketIOClient(host, {\n      withCredentials: true,\n      extraHeaders: { 'ecoffee-nickname': nickname }\n    }));\n  }, [nickname]);\n\n  return (\n    <div className={styles.app}>\n      { nickname ? <Home nickname={nickname} socket={socket} /> : <Login onLogin={handleOnLogin} /> }\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './pages/App';\nimport reportWebVitals from './reportWebVitals';\nimport './index.css';\nimport Home from './pages/Home';\nimport Login from './pages/Login';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}