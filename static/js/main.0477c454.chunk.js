(this.webpackJsonpecoffee=this.webpackJsonpecoffee||[]).push([[0],{10:function(e,t,c){e.exports={chat:"chat_chat__16YQr",messageInput:"chat_messageInput__wyxMG",messages:"chat_messages__3Bv-7",message:"chat_message__35AWL",message__sender:"chat_message__sender__31rk4"}},24:function(e,t,c){e.exports={mobile:"320px",tabletPortrait:"600px",tabletLandscape:"800px",desktop:"1200px",viewportLimit:"1800px",avatarModal:"login_avatarModal__1D_H3",avatarModal__selected:"login_avatarModal__selected__1Qnt9"}},25:function(e,t,c){e.exports={overlay:"overlay_overlay__2rQ9-",visible:"overlay_visible__vRS_O"}},3:function(e,t,c){e.exports={mobile:"320px",tabletPortrait:"600px",tabletLandscape:"800px",desktop:"1200px",viewportLimit:"1800px",home:"pages_home__TzgP_",settings:"pages_settings__3YtZi",settings__right:"pages_settings__right__2HMwJ",login:"pages_login__1zU2N",login__overlay:"pages_login__overlay__3ruVW",login__wrapper:"pages_login__wrapper__3jyhL",login__title:"pages_login__title__1y1SG",login__login:"pages_login__login__3-sUG",login__login__avatar:"pages_login__login__avatar__2hQGQ"}},45:function(e,t,c){e.exports={localVideo:"video_localVideo__Tmry_"}},84:function(e,t,c){},85:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(43),o=c.n(s),i=c(2),r=c(3),l=c.n(r),b=c.p+"static/media/coffee-main.b851936d.jpeg",d=c(9),u=c(24),f=c.n(u),j=c(25),_=c.n(j),g=c(12),O=c.n(g),v=c(0),h=function(e){var t=e.children,c=e.visible,n=e.onClick,s=Object(a.useCallback)((function(e){e.target===e.currentTarget&&n()}),[n]);return Object(v.jsx)("div",{onClick:s,className:O()(_.a.overlay,Object(d.a)({},_.a.visible,c)),children:t})},x=["b9cc3872853c8c3ed85db39771a27fe3","f1e68df62e876e7fd0e51c20b0f4a7f4","ef67ea27213a5744db57dc0fd3a3ba22","07b4fe6d6119fb4501a489466eeee235","ec2acfd745b1efbe615f0a89ae2956ce","d2b82830880fd50a4d1e9d20fc3ecb74","f4df169dcfa242fcab91495eeff9dadb","802ddba716bb44302943f322c419ae58","b91774ec221c52d0bfb718a1ae3ab8c6","ac01b565737abe314877dcc981aa37f3","65528ccdb996fcb57c85cd584772310c","568f03fb703e6f4137ccb2fc7e5cbdd8","9c3f3ffb2939a30d7aa42105b0668820","5ac483a422267f2882fe8fe8b2173fbe","42df9bb3cfd73ef98f3302e594d26b39","849b922ba34228e8cb882866bc283b17","4a3ca6cb07b66e4bde0806c703e442ed","f591ddaef9ed87f9e7b3d113a40c4b46","10c1f317b31ca5a76e9c34af34dc7827","b01ed1e0657688cad8aeb3d2d1b3d94b","eba297a6d31d8650bd626a423ff274ad","6ebd5f6d4c9d43c1dc5083a5f2082167","c2d9f90a61e4d28f7734dafb65457017","64211c6c85f66d89c1e2177d578719de","73cbc5714ec21972aeadcbee69dfe956","8df99977ee64dfa6a9c581ce7a7e277a","d723e9b27ce8864111a5cbb59cc9c720","8e428180bfc90f6364e72a3769902455","4dc9c222c5e2599d2b72e8eddc150b94","3d586a434b17e3d1ed7d6eb050a97fb0"],p=function(e){return"".concat("https://robohash.org/").concat(e).concat(".png").concat("?size=100x100")},m=function(e){var t=e.onClose,c=e.visible,n=e.selectedHash,s=Object(a.useState)((function(){return n||x[0]})),o=Object(i.a)(s,2),r=o[0],l=o[1],b=function(){console.log("Closing",r),t&&t(r)};return Object(v.jsx)(h,{onClick:b,visible:c,children:Object(v.jsxs)("div",{className:f.a.avatarModal,children:[Object(v.jsx)("svg",{onClick:b,stroke:"white",focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:Object(v.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})}),x.map((function(e){return Object(v.jsx)("img",{className:O()(Object(d.a)({},f.a.avatarModal__selected,e===r)),onClick:function(){return function(e){l(e)}(e)},tabIndex:0,src:p(e)},e)})),Object(v.jsx)("footer",{children:"Pick your favourite robot"})]})})},k=function(e){var t=e.onLogin,c=Object(a.useState)(""),n=Object(i.a)(c,2),s=n[0],o=n[1],r=Object(a.useState)((function(){return p(localStorage.getItem("avatar")||x[0])})),d=Object(i.a)(r,2),u=d[0],f=d[1],j=Object(a.useState)(!0),_=Object(i.a)(j,2),g=(_[0],_[1]),O=Object(a.useState)(!1),h=Object(i.a)(O,2),k=h[0],y=h[1],C=Object(a.useState)(),w=Object(i.a)(C,2),S=w[0],N=w[1],L=function(e){return e&&e.length>=1},M=function(){L(s)&&t&&t(s)};return Object(v.jsxs)("div",{className:l.a.login,children:[Object(v.jsx)(m,{visible:k,onClose:function(e){y(!1),N(e),f(p(e))},selectedHash:S}),Object(v.jsx)("img",{src:b}),Object(v.jsx)("div",{className:l.a.login__overlay}),Object(v.jsxs)("div",{className:l.a.login__wrapper,children:[Object(v.jsxs)("div",{className:l.a.login__title,children:[Object(v.jsx)("h1",{children:"Hello"}),Object(v.jsxs)("p",{children:[s&&"".concat(s,", "),"ready for some coffee?"]})]}),Object(v.jsxs)("div",{className:l.a.login__login,children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:function(){y(!0)},className:l.a.login__login__avatar,children:Object(v.jsx)("img",{src:u})}),Object(v.jsx)("input",{spellCheck:!1,onKeyDown:function(e){"Enter"===e.key&&M()},placeholder:"Nickname",onChange:function(e){var t=e.target.value;g(!L(t)),o(t)},type:"text",maxLength:16})]}),Object(v.jsx)("button",{onClick:M,children:"Ready"})]})]})]})},y=c(44),C=c(27),w=c(10),S=c.n(w),N=function(e){var t=e.message,c=e.sender,a=(e.id,e.nickname);return Object(v.jsxs)("div",{className:O()(S.a.message,Object(d.a)({},S.a.message__sender,c)),children:[Object(v.jsx)("span",{children:a}),Object(v.jsx)("div",{children:t})]})},L=function(e){var t=e.socket,c=Object(a.useState)(),n=Object(i.a)(c,2),s=n[0],o=n[1],r=Object(a.useState)([]),l=Object(i.a)(r,2),b=l[0],d=l[1],u=Object(a.useRef)(),f=Object(a.useRef)(),j=function(){var e;s&&(null===t||void 0===t||t.emit("message",s),d((function(e){return[].concat(Object(C.a)(e),[{message:s,nickname:"You",sender:!0}])})),u.current.value="",o(""),null===(e=u.current)||void 0===e||e.focus())};Object(a.useEffect)((function(){var e;null===(e=f.current)||void 0===e||e.scrollIntoView()}),[b]);var _=Object(a.useCallback)((function(e){"Enter"===e.key&&j()}),[j]),g=Object(a.useCallback)((function(e){var t=e.target;o(t.value)}),[]);return Object(a.useEffect)((function(){var e=function(e){return d((function(t){return[].concat(Object(C.a)(t),[e])}))};return null===t||void 0===t||t.on("message",e),function(){null===t||void 0===t||t.off("message",e)}}),[t]),Object(v.jsxs)("div",{className:S.a.chat,children:[Object(v.jsxs)("div",{className:S.a.messages,children:[b.map((function(e){return Object(v.jsx)(N,Object(y.a)({},e))})),Object(v.jsx)("div",{ref:f})]}),Object(v.jsxs)("div",{className:S.a.messageInput,children:[Object(v.jsx)("input",{ref:u,onChange:g,onKeyDown:_}),Object(v.jsx)("button",{onClick:j,children:Object(v.jsx)("svg",{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:Object(v.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})]})},M=c(16),I=c.n(M),P=c(26),H=c(45),E=c.n(H),z=(new RTCPeerConnection({iceServers:[{urls:["stun:stun.l.google.com:19302","stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302","stun:stun3.l.google.com:19302","stun:stun4.l.google.com:19302","stun:stun.freeswitch.org:3478"]}]}),function(e){var t=e.play,c=e.onPlay,n=Object(a.useRef)(),s=Object(a.useCallback)(Object(P.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!1,video:!0});case 2:t=e.sent,n.current.srcObject=t,c&&c(t);case 5:case"end":return e.stop()}}),e)}))),[]);return Object(a.useEffect)(Object(P.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t)try{s()}catch(c){console.log(c)}case 1:case"end":return e.stop()}}),e)}))),[t]),Object(v.jsx)("video",{className:E.a.localVideo,ref:n,autoPlay:!0,playsInline:!0})}),B=function(e){var t=e.nickname,c=e.socket,n=Object(a.useState)(!1),s=Object(i.a)(n,2),o=s[0],r=s[1],b=Object(a.useState)(null),d=Object(i.a)(b,2),u=(d[0],d[1]);return Object(v.jsxs)("div",{className:l.a.home,children:[Object(v.jsx)("header",{children:Object(v.jsxs)("div",{children:[Object(v.jsxs)("span",{children:["Hello ",t]}),Object(v.jsx)("button",{onClick:function(){r(!0)},children:Object(v.jsx)("svg",{focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:Object(v.jsx)("path",{d:"M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"})})})]})}),Object(v.jsx)(L,{socket:c}),Object(v.jsxs)(h,{visible:o,onClick:function(){return r(!1)},children:[Object(v.jsx)(z,{play:o,onPlay:function(e){u(e)}}),Object(v.jsx)("span",{})]})]})},R=c(46),T=c.n(R),V=function(){var e=Object(a.useState)(),t=Object(i.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)((function(){return localStorage.getItem("nickname")})),o=Object(i.a)(s,2),r=o[0],b=o[1];return Object(a.useEffect)((function(){n(T()("https://e-coffee-server.herokuapp.com/",{withCredentials:!0,extraHeaders:{"ecoffee-nickname":r}}))}),[r]),Object(v.jsx)("div",{className:l.a.app,children:r?Object(v.jsx)(B,{nickname:r,socket:c}):Object(v.jsx)(k,{onLogin:function(e){e&&(localStorage.setItem("nickname",e),b(e))}})})},D=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,87)).then((function(t){var c=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,o=t.getTTFB;c(e),a(e),n(e),s(e),o(e)}))};c(84);o.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(V,{})}),document.getElementById("root")),D()}},[[85,1,2]]]);
//# sourceMappingURL=main.0477c454.chunk.js.map